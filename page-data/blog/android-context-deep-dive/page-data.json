{"componentChunkName":"component---src-templates-blog-js","path":"/blog/android-context-deep-dive","result":{"data":{"markdownRemark":{"id":"9248a9fe-72a5-51c6-93f8-44cf7fd41b60","frontmatter":{"title":"Android Context - Deep Dive","date":"14/10/2020"},"html":"<h2 id=\"the-ubiquity-of-context\" style=\"position:relative;\"><a href=\"#the-ubiquity-of-context\" aria-label=\"the ubiquity of context permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>The ubiquity of context</h2>\n<p>Every developer that has made even the most mininal Android application has touched the Context object in some way or another, even if they don't grasp what is the purpose of it. This vision of Context as some object that you have to pass around everywhere in order to do the things you want to do sometimes persists even after you gather experience with the platform, which is concerning because passing it around recklessly might lead to memory leaks. Knowing about this, lots of experienced Android developers have made articles about the subject, talking about how to use it and warning about its possible misuse.</p>\n<p>I've read a fair amount of articles on this topic, but one thing that always bother me is that they never talk about why Context exists and what is its purpose in the whole picture of an Android system. They talk about the application, activity and services context how you shouldn't mix them up, but never why those things have a Context in the first place. This always left me wondering why some tasks need to use Context and others don't? I knew where to use them by practice, but I was never quite sure of the underlying reason. </p>\n<p>The Context documentation doesn't help much either:</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token comment\">/**\n * Interface to global information about an application environment.  This is\n * an abstract class whose implementation is provided by the Android system.  \n * It allows access to application-specific resources and classes, as well as\n * up-calls for application-level operations such as launching activities,\n * broadcasting and receiving intents, etc.\n */</span>\n <span class=\"token keyword\">public</span> <span class=\"token keyword\">abstract</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Context</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">/* lots of code in here */</span>\n <span class=\"token punctuation\">}</span></code></pre></div>\n<br />\n<p>\nThe description is very generic, what exactly is the \"global information\" of the \"application environment\"? Is it information about other pieces of my application (e.g fragments and services), information about the operating system services or both? It talks about \"application-level operations\" like launching activities, but am I allowed to launch activities from a Service? The answer was yes until <a href=\"https://developer.android.com/guide/components/activities/background-starts\">Android 10</a> which added several restrictions were added to the process.\n</p>\n<h2 id=\"the-context-interface\" style=\"position:relative;\"><a href=\"#the-context-interface\" aria-label=\"the context interface permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>The Context interface</h2>\n<h2 id=\"fragments-dont-need-no-context\" style=\"position:relative;\"><a href=\"#fragments-dont-need-no-context\" aria-label=\"fragments dont need no context permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Fragments don't need no context</h2>\n<ul>\n<li><a href=\"https://github.com/aosp-mirror/platform_frameworks_base/blob/a4ddee215e41ea232340c14ef92d6e9f290e5174/core/java/android/app/ActivityThread.java\">ActivityThread.java</a> -> manages execution of the main thread in an application process, scheduling and executing activities, broadcast, and other operations on it as the activity manager requests.</li>\n<li><a href=\"https://github.com/aosp-mirror/platform_frameworks_base/blob/a4ddee215e41ea232340c14ef92d6e9f290e5174/core/java/com/android/internal/os/ZygoteInit.java\">ZigoteInit.java</a> -> Startup class for the zygote process</li>\n<li><a href=\"https://github.com/aosp-mirror/platform_frameworks_base/blob/a4ddee215e41ea232340c14ef92d6e9f290e5174/core/java/com/android/internal/os/Zygote.java\">Zigote.java</a> -> The actual zygote</li>\n<li><a href=\"https://github.com/aosp-mirror/platform_frameworks_base/blob/a4ddee215e41ea232340c14ef92d6e9f290e5174/services/java/com/android/server/SystemServer.java\">SystemServer.java</a> -> First service to be initiated</li>\n<li><a href=\"https://elinux.org/Android_Zygote_Startup\">Android boot sequence</a> -> zygote boot process</li>\n<li><a href=\"https://github.com/aosp-mirror/platform_frameworks_base/blob/master/core/java/android/app/Instrumentation.java\">Instrumentation.java</a> -> Base class for implementing application instrumentation code.</li>\n</ul>"}},"pageContext":{"slug":"android-context-deep-dive"}}}