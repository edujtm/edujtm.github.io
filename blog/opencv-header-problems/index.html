<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/styles.27c5181fd046c77054a7.css">code[class*=language-],pre[class*=language-]{color:#a9b7c6;font-family:Consolas,Monaco,Andale Mono,monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}code[class*=language-]::selection,code[class*=language-] ::selection,pre[class*=language-]::selection,pre[class*=language-] ::selection{color:inherit;background:rgba(33,66,131,.85)}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto}:not(pre)>code[class*=language-],pre[class*=language-]{background:#2b2b2b}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em}.token.cdata,.token.comment,.token.prolog{color:grey}.token.atrule,.token.boolean,.token.delimiter,.token.important,.token.keyword,.token.selector{color:#cc7832}.token.attr-name,.token.operator,.token.punctuation{color:#a9b7c6}.token.builtin,.token.doctype,.token.tag,.token.tag .punctuation{color:#e8bf6a}.token.entity,.token.number,.token.symbol{color:#6897bb}.token.constant,.token.property,.token.variable{color:#9876aa}.token.char,.token.string{color:#6a8759}.token.attr-value,.token.attr-value .punctuation{color:#a5c261}.token.attr-value .punctuation:first-child{color:#a9b7c6}.token.url{color:#287bde;text-decoration:underline}.token.function{color:#ffc66d}.token.regex{background:#364135}.token.bold{font-weight:700}.token.italic{font-style:italic}.token.inserted{background:#294436}.token.deleted{background:#484a4a}code.language-css .token.property,code.language-css .token.property+.token.punctuation{color:#a9b7c6}code.language-css .token.id,code.language-css .token.selector>.token.attribute,code.language-css .token.selector>.token.class,code.language-css .token.selector>.token.pseudo-class,code.language-css .token.selector>.token.pseudo-element{color:#ffc66d}.command-line-prompt{border-right:1px solid #999;display:block;float:left;font-size:100%;letter-spacing:-1px;margin-right:1em;pointer-events:none;-webkit-user-select:none;-ms-user-select:none;user-select:none}.NavigationBar-module--nav-list--VWmL8{display:flex;list-style-type:none;margin:0}.NavigationBar-module--nav-item--1bjuq{color:#999;font-size:.9rem;margin-right:1.3rem;padding:0 2px;text-decoration:none;-webkit-transition:all .2s ease-in-out;transition:all .2s ease-in-out;position:relative}.NavigationBar-module--nav-item--1bjuq:after,.NavigationBar-module--nav-item--1bjuq:before{content:"";position:absolute;bottom:-7px;width:0;height:2px;margin:2px 0 0;-webkit-transition:all .2s ease-in-out;transition:all .2s ease-in-out;-webkit-transition-duration:.25s;transition-duration:.25s;opacity:0;background-color:#fb8177}.NavigationBar-module--nav-item--1bjuq:before{left:50%}.NavigationBar-module--nav-item--1bjuq:after{right:50%}.NavigationBar-module--nav-item--1bjuq:hover{cursor:pointer;color:#666}.NavigationBar-module--nav-item--1bjuq:hover:after,.NavigationBar-module--nav-item--1bjuq:hover:before{opacity:1;width:50%}.NavigationBar-module--active-nav-item--3YWLJ{color:#333}.Header-module--header--2E8ew{padding:1rem 0 3rem}.Header-module--title--1WXgF{color:#000;font-size:3rem;text-decoration:none}.Footer-module--footer--3yGWB{margin-top:3rem}html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}article,aside,details,figcaption,figure,footer,header,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block}audio:not([controls]){display:none;height:0}progress{vertical-align:baseline}[hidden],template{display:none}a{color:#fb8177;text-decoration:none;background-color:transparent;-webkit-text-decoration-skip:objects}a:active,a:hover{color:#cb7a64;outline-width:0}abbr[title]{border-bottom:none;text-decoration:underline;-webkit-text-decoration:underline dotted;text-decoration:underline dotted}b,strong{font-weight:inherit;font-weight:bolder}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background-color:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}svg:not(:root){overflow:hidden}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}figure{margin:1em 40px}hr{box-sizing:content-box;height:0;overflow:visible}button,input,optgroup,select,textarea{font:inherit;margin:0}optgroup{font-weight:700}button,input{overflow:visible}button,select{text-transform:none}[type=reset],[type=submit],button,html [type=button]{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-input-placeholder{color:inherit;opacity:.54}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}html{font:112.5%/1.45em,georgia,serif;box-sizing:border-box;overflow-y:scroll}*,:after,:before{box-sizing:inherit}body{color:rgba(0,0,0,.8);font-family:sans-serif;font-weight:400;word-wrap:break-word;-webkit-font-kerning:normal;font-kerning:normal;-ms-font-feature-settings:"kern","liga","clig","calt";font-feature-settings:"kern","liga","clig","calt"}img{max-width:100%;padding:0;margin:0 0 1.45rem}h1{font-size:2.25rem}h1,h2{padding:0;margin:0 0 1.45rem;color:inherit;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif;font-weight:700;text-rendering:optimizeLegibility;line-height:1.1}h2{font-size:1.62671rem}h3{font-size:1.38316rem}h3,h4{padding:0;margin:0 0 1.45rem;color:inherit;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif;font-weight:700;text-rendering:optimizeLegibility;line-height:1.1}h4{font-size:1rem}h5{font-size:.85028rem}h5,h6{padding:0;margin:0 0 1.45rem;color:inherit;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif;font-weight:700;text-rendering:optimizeLegibility;line-height:1.1}h6{font-size:.78405rem}hgroup{padding:0;margin:0 0 1.45rem}ol,ul{padding:0;margin:0 0 1.45rem 1.45rem;list-style-position:outside;list-style-image:none}dd,dl,figure,p{padding:0;margin:0 0 1.45rem}pre{margin:0 0 1.45rem;font-size:.85rem;line-height:1.42;background:rgba(0,0,0,.04);border-radius:3px;overflow:auto;word-wrap:normal;padding:1.45rem}table{font-size:1rem;line-height:1.45rem;border-collapse:collapse;width:100%}fieldset,table{padding:0;margin:0 0 1.45rem}blockquote{padding:0;margin:0 1.45rem 1.45rem}form,iframe,noscript{padding:0;margin:0 0 1.45rem}hr{padding:0;margin:0 0 calc(1.45rem - 1px);background:rgba(0,0,0,.2);border:none;height:1px}address{padding:0;margin:0 0 1.45rem}b,dt,strong,th{font-weight:700}li{margin-bottom:.725rem}ol li,ul li{padding-left:0}li>ol,li>ul{margin-left:1.45rem;margin-bottom:.725rem;margin-top:.725rem}blockquote :last-child,li :last-child,p :last-child{margin-bottom:0}li>p{margin-bottom:.725rem}code,kbd,samp{font-size:.85rem;line-height:1.45rem}abbr,abbr[title],acronym{border-bottom:1px dotted rgba(0,0,0,.5);cursor:help}abbr[title]{text-decoration:none}td,th,thead{text-align:left}td,th{border-bottom:1px solid rgba(0,0,0,.12);font-feature-settings:"tnum";-moz-font-feature-settings:"tnum";-ms-font-feature-settings:"tnum";-webkit-font-feature-settings:"tnum";padding:.725rem .96667rem calc(.725rem - 1px)}td:first-child,th:first-child{padding-left:0}td:last-child,th:last-child{padding-right:0}code,tt{background-color:rgba(0,0,0,.04);border-radius:3px;font-family:SFMono-Regular,Consolas,Roboto Mono,Droid Sans Mono,Liberation Mono,Menlo,Courier,monospace;padding:.2em 0}pre code{background:none;line-height:1.42}code:after,code:before,tt:after,tt:before{letter-spacing:-.2em;content:" "}pre code:after,pre code:before,pre tt:after,pre tt:before{content:""}@media only screen and (max-width:480px){html{font-size:100%}}.command-line-prompt>span:before{color:#999;content:" ";display:block;padding-right:.8em}.command-line-prompt>span[data-user]:before{content:"[" attr(data-user) "@" attr(data-host) "] $"}.command-line-prompt>span[data-user=root]:before{content:"[" attr(data-user) "@" attr(data-host) "] #"}.command-line-prompt>span[data-prompt]:before{content:attr(data-prompt)}.Layout-module--container--2DmHh{margin:0 auto;max-width:750px;padding:1rem;display:flex;flex-direction:column;min-height:100vh}.Layout-module--content--3KiRz{flex:1 1}@-webkit-keyframes blog-module--shadow-drop-2-center--UKVRN{0%{-webkit-transform:translateZ(0);transform:translateZ(0);box-shadow:0 0 0 0 transparent}to{-webkit-transform:translateZ(50px);transform:translateZ(50px);box-shadow:0 0 20px 0 rgba(0,0,0,.35)}}@keyframes blog-module--shadow-drop-2-center--UKVRN{0%{-webkit-transform:translateZ(0);transform:translateZ(0);box-shadow:0 0 0 0 transparent}to{-webkit-transform:translateZ(50px);transform:translateZ(50px);box-shadow:0 0 20px 0 rgba(0,0,0,.35)}}.blog-module--posts--a25pe{list-style-type:none;margin:0}.blog-module--post--1jMia{margin:1rem 0}.blog-module--post--1jMia a{color:#000;display:block;padding:1.5rem 1.2rem;text-decoration:none;border-radius:12px;border:1px solid #fb8177}.blog-module--post--1jMia a:hover{-webkit-animation:blog-module--shadow-drop-2-center--UKVRN .4s cubic-bezier(.25,.46,.45,.94) both;animation:blog-module--shadow-drop-2-center--UKVRN .4s cubic-bezier(.25,.46,.45,.94) both}.blog-module--post--1jMia h2{margin-bottom:0}.blog-module--post--1jMia p{color:#777;font-size:.8rem;font-style:italic}</style><meta name="generator" content="Gatsby 2.19.7"/><title data-react-helmet="true">A fix for g++ not being able to find OpenCV dependencies on Ubuntu 18.04 | Edu&#x27;s coding fireplace</title><style type="text/css">
    .anchor.before {
      position: absolute;
      top: 0;
      left: 0;
      transform: translateX(-100%);
      padding-right: 4px;
    }
    .anchor.after {
      display: inline-block;
      padding-left: 4px;
    }
    h1 .anchor svg,
    h2 .anchor svg,
    h3 .anchor svg,
    h4 .anchor svg,
    h5 .anchor svg,
    h6 .anchor svg {
      visibility: hidden;
    }
    h1:hover .anchor svg,
    h2:hover .anchor svg,
    h3:hover .anchor svg,
    h4:hover .anchor svg,
    h5:hover .anchor svg,
    h6:hover .anchor svg,
    h1 .anchor:focus svg,
    h2 .anchor:focus svg,
    h3 .anchor:focus svg,
    h4 .anchor:focus svg,
    h5 .anchor:focus svg,
    h6 .anchor:focus svg {
      visibility: visible;
    }
  </style><script>
    document.addEventListener("DOMContentLoaded", function(event) {
      var hash = window.decodeURI(location.hash.replace('#', ''))
      if (hash !== '') {
        var element = document.getElementById(hash)
        if (element) {
          var scrollTop = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop
          var clientTop = document.documentElement.clientTop || document.body.clientTop || 0
          var offset = element.getBoundingClientRect().top + scrollTop - clientTop
          // Wait for the browser to finish rendering before scrolling.
          setTimeout((function() {
            window.scrollTo(0, offset - 0)
          }), 0)
        }
      }
    })
  </script><link as="script" rel="preload" href="/webpack-runtime-209bec665b2803701692.js"/><link as="script" rel="preload" href="/app-8055b4c97bd1aa554574.js"/><link as="script" rel="preload" href="/styles-e664550a61ed1422157f.js"/><link as="script" rel="preload" href="/commons-755632733a40be123111.js"/><link as="script" rel="preload" href="/component---src-templates-blog-js-f5e1c9189c556689a255.js"/><link as="fetch" rel="preload" href="/page-data/blog/opencv-header-problems/page-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" role="group" id="gatsby-focus-wrapper"><div class="Layout-module--container--2DmHh"><div class="Layout-module--content--3KiRz"><header class="Header-module--header--2E8ew"><h1><a class="Header-module--title--1WXgF" href="/">Edu&#x27;s coding fireplace</a></h1><nav><ul class="NavigationBar-module--nav-list--VWmL8"><li><a class="NavigationBar-module--nav-item--1bjuq" href="/">Home</a></li><li><a class="NavigationBar-module--nav-item--1bjuq" href="/blog">Blog</a></li><li><a class="NavigationBar-module--nav-item--1bjuq" href="/about">About</a></li><li><a class="NavigationBar-module--nav-item--1bjuq" href="/contact">Contact</a></li></ul></nav></header><h1>A fix for g++ not being able to find OpenCV dependencies on Ubuntu 18.04</h1><p>2020-03-14</p><div><h2 id="the-issue" style="position:relative;"><a href="#the-issue" aria-label="the issue permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>The Issue</h2>
<p>Adding third-party code to a C++ application is well-known for being a headache, requiring the user to know about the steps of the
compilation process, the OS environment and the difference between the types of library (static vs dynamically linked). The issue is
annoying enough that some reasonably big C++ libraries like <a href="https://github.com/catchorg/Catch2">Catch2</a> and <a href="https://www.boost.org/">Boost</a>
offer header-only solutions to simplify getting the build process to work correctly.</p>
<p>OpenCV is a big library with many dependencies, and as such, is not exempt from this complex configuration process. Luckily some experienced
users have made detailed tutorials of the installation process to help us, layman users, benefit from the library, such as <a href="https://www.learnopencv.com/install-opencv-3-4-4-on-ubuntu-18-04/">this one</a> which I used to install it on my computer.</p>
<p> I thought that after finishing the tutorial I would be able to run <code class="language-text">g++</code> and be done with it, but that turned out not to be true, which lead me into
multiple hours of troubleshooting in order to find out if I had done anything wrong.</p>
<p> <em>If you do not wish to read the explanation of the problems and just fix them quickly, I've made a <a href="#tldr">TLDR</a></em></p>
<h2 id="the-missing-steps" style="position:relative;"><a href="#the-missing-steps" aria-label="the missing steps permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>The missing steps</h2>
<p>At the end of the tutorial, we are instructed to run the following command in order to compile our code with opencv:</p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash"><span class="command-line-prompt"><span data-user=edujtm data-host=localhost></span></span>g++ <span class="token variable"><span class="token variable">`</span>pkg-config --cflags --libs <span class="token operator">&lt;</span>OpenCV_Home_Dir<span class="token operator">></span>/installation/OpenCV-3.4.4/lib/pkgconfig/opencv.pc<span class="token variable">`</span></span> my_sample_file.cpp -o my_sample_file</code></pre></div>
<p><br>
With <code class="language-text">&lt;OpenCV_Home_Dir&gt;/installation</code> being the directory where we are supposed to install the OpenCV library. I modified the directory in order to suit my
folder organization, so in my case the library was installed at the following location: </p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">$HOME/Code/local/OpenCV-3.4.4/</code></pre></div>
<p><br>
Unfortunately, after running this command I was getting a bunch of undefined references to OpenCV functions.</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">hello_world.cpp:(.text+0x5f): undefined reference to &quot;cv::imread(cv::String const&amp;, int)&quot;
hello_world.cpp:(.text+0xb3): undefined reference to &quot;cv::imshow(cv::String const&amp;, cv::_InputArray const&amp;)&quot;
hello_world.cpp:(.text+0xdb): undefined reference to &quot;cv::waitKey(int)&quot;</code></pre></div>
<p><br>
To understand why this message is happening, let's first look at the pkg-config output.</p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash"><span class="command-line-prompt"><span data-user=edujtm data-host=localhost></span></span>pkg-config --cflags --libs <span class="token environment constant">$HOME</span>/Code/local/OpenCV-3.4.4/lib/pkgconfig/opencv.pc</code></pre></div>
<p><br>
Which outputs:</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">-I/home/edujtm/Code/local/OpenCV-3.4.4/include/opencv -I/home/edujtm/Code/local/OpenCV-3.4.4/include -L/home/edujtm/Code/local/OpenCV-3.4.4/lib 
-lopencv_stitching -lopencv_superres -lopencv_videostab -lopencv_aruco -lopencv_bgsegm -lopencv_bioinspired -lopencv_ccalib -lopencv_cvv 
-lopencv_dnn_objdetect -lopencv_dpm -lopencv_highgui -lopencv_videoio -lopencv_face -lopencv_freetype -lopencv_fuzzy -lopencv_hdf -lopencv_hfs 
-lopencv_img_hash -lopencv_line_descriptor -lopencv_optflow -lopencv_reg -lopencv_rgbd -lopencv_saliency -lopencv_sfm -lopencv_stereo 
-lopencv_structured_light -lopencv_phase_unwrapping -lopencv_surface_matching -lopencv_tracking -lopencv_datasets -lopencv_text -lopencv_dnn -lopencv_plot 
-lopencv_xfeatures2d -lopencv_shape -lopencv_video -lopencv_ml -lopencv_ximgproc -lopencv_xobjdetect -lopencv_objdetect -lopencv_calib3d -lopencv_imgcodecs 
-lopencv_features2d -lopencv_flann -lopencv_xphoto -lopencv_photo -lopencv_imgproc -lopencv_core</code></pre></div>
<p><br>
This is the huge list of OpenCV modules that you need to specify so that the linker is able to find the pre-compiled binaries from OpenCV. You don't actually need to specify all of them, only the ones you're using, but pkg-config will add everything so that you won't have problems when using different modules.</p>
<p>So essentially the error message is happening because the linker is not being able to find the binaries with the implementation of OpenCV functions, even though they are being specified in the command line.</p>
<p>What surprised me was that the order in which you declared the libraries to be linked is important to the linking process. As explained briefly by <a href="https://stackoverflow.com/questions/31634757/how-to-correct-undefined-reference-error-in-compiling-opencv/31635489#31635489">this comment by Ivan Aksamentov</a>:</p>
<blockquote>
<p>In short, the rule "libraries come after objects that use them" is enforced by many GCC distributions to link shared libs only as they are needed. In your case object file facerec<em>eigenfaces.o, being produced from source file facerec</em>eigenfaces.cpp, depends on OpenCV libs (exact list is given by a pkg-config command), and thus libs should go after that file. You could also notice very same pattern in pkg-config output: for example, X11, pthreads and other Linux system dependencies go after dependent OpenCV libs.</p>
</blockquote>
<p>To put it briefly: if you source code depends on an linked file, it should come before the specified linked file. Following this, the correct way to call the command is by placing the pkg-config after the files, like so:</p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash"><span class="command-line-prompt"><span data-user=edujtm data-host=localhost></span></span>g++ my_sample_file.cpp -o my_sample_file <span class="token variable"><span class="token variable">`</span>pkg-config --cflags --libs <span class="token operator">&lt;</span>OpenCV_Home_Dir<span class="token operator">></span>/installation/OpenCV-3.4.4/lib/pkgconfig/opencv.pc<span class="token variable">`</span></span></code></pre></div>
<p><br>
After this was fixed, the files were compiling just fine. But now, the following error was happening at runtime:</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">./hello_world: error while loading shared libraries: libopencv_highgui.so.3.4: cannot open shared object file: No such file or directory</code></pre></div>
<p><br>
Well, that's progress, but we are not there yet. We moved from a linker issue to a shared library issue. The name shared comes from the fact that a single binary of this program can be used by multiple other programs during runtime, as long as they can locate it. </p>
<p>What's happening now is that, when we run our file, the operating system is unable to find some shared libraries from OpenCV. We need to find a way to tell it where our shared libraries are.</p>
<p>The primary way of doing this is linux is by adding a <em>.conf</em> file to <code class="language-text">/etc/ld.so.conf.d/</code>. I've created an opencv.conf file with the following content:</p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash"><span class="command-line-prompt"><span data-user=edujtm data-host=localhost></span></span><span class="token builtin class-name">echo</span> <span class="token string">"/home/edujtm/Code/local/OpenCV-3.4.4/lib"</span> <span class="token operator">></span> opencv.conf</code></pre></div>
<p><br>
If you followed <a href="https://www.learnopencv.com/install-opencv-3-4-4-on-ubuntu-18-04/">the tutorial</a> then your <em>lib</em> folder will probably be located at <code class="language-text">&lt;OpenCV_Home_Dir&gt;/installation/OpenCV-3.4.4/lib</code>. </p>
<p>Finally, move the new <em>.conf</em> file to <code class="language-text">/etc/ld.so.conf.d/</code> and run ldconfig, which adds the new shared libraries to its cache.</p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash"><span class="command-line-prompt"><span data-user=edujtm data-host=localhost></span><span data-user=edujtm data-host=localhost></span></span><span class="token function">sudo</span> <span class="token function">mv</span> opencv.conf /etc/ld.so.conf.d/
<span class="token function">sudo</span> ldconfig</code></pre></div>
<p><br>
Because this was an OS level issue, you compiled binaries should work just fine, even without recompiling them.</p>
<h2 id="tldr" style="position:relative;"><a href="#tldr" aria-label="tldr permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>TL;DR</h2>
<h3 id="step-1-change-the-g-command-order" style="position:relative;"><a href="#step-1-change-the-g-command-order" aria-label="step 1 change the g command order permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Step 1: Change the G++ command order</h3>
<p>Change the specified command from the tutorial, placing the dependency libraries at the end:</p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">g++ <span class="token variable"><span class="token variable">`</span>pkg-config --cflags --libs <span class="token operator">&lt;</span>OpenCV_Home_Dir<span class="token operator">></span>/installation/OpenCV-3.4.4/lib/pkgconfig/opencv.pc<span class="token variable">`</span></span> my_sample_file.cpp -o my_sample_file
<span class="token comment"># change to </span>
g++ my_sample_file.cpp -o my_sample_file <span class="token variable"><span class="token variable">`</span>pkg-config --cflags --libs <span class="token operator">&lt;</span>OpenCV_Home_Dir<span class="token operator">></span>/installation/OpenCV-3.4.4/lib/pkgconfig/opencv.pc<span class="token variable">`</span></span></code></pre></div>
<h3 id="step-2-add-shared-libraries-to-etcldsoconfd" style="position:relative;"><a href="#step-2-add-shared-libraries-to-etcldsoconfd" aria-label="step 2 add shared libraries to etcldsoconfd permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Step 2: Add shared libraries to /etc/ld.so.conf.d/</h3>
<p>Create a <em>.conf</em> file pointing to the OpenCV shared libraries folder, place it at <code class="language-text">/etc/ld.so.conf.d/</code> and run ldconfig.</p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash"><span class="token builtin class-name">echo</span> <span class="token string">"/home/edujtm/Code/local/OpenCV-3.4.4/lib"</span> <span class="token operator">></span> opencv.conf
<span class="token function">sudo</span> <span class="token function">mv</span> opencv.conf /etc/ld.so.conf.d/
<span class="token function">sudo</span> ldconfig</code></pre></div></div></div><footer class="Footer-module--footer--3yGWB"><p>Created by <!-- -->Eduardo Macedo<!-- --> with <a href="https://www.gatsbyjs.org/">Gatsby.js</a></p></footer></div></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/blog/opencv-header-problems";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app-8055b4c97bd1aa554574.js"],"component---src-templates-blog-js":["/component---src-templates-blog-js-f5e1c9189c556689a255.js"],"component---src-pages-404-js":["/component---src-pages-404-js-3f69c75eb4cb9d9e9f4b.js"],"component---src-pages-about-js":["/component---src-pages-about-js-13285d468a4269eed8e5.js"],"component---src-pages-blog-js":["/component---src-pages-blog-js-e1bfdc550fefbe6f28bf.js"],"component---src-pages-contact-js":["/component---src-pages-contact-js-9c78996335b2595ce5b3.js"],"component---src-pages-index-js":["/component---src-pages-index-js-2282d6a3ec01f4ebfe39.js"]};/*]]>*/</script><script src="/component---src-templates-blog-js-f5e1c9189c556689a255.js" async=""></script><script src="/commons-755632733a40be123111.js" async=""></script><script src="/styles-e664550a61ed1422157f.js" async=""></script><script src="/app-8055b4c97bd1aa554574.js" async=""></script><script src="/webpack-runtime-209bec665b2803701692.js" async=""></script></body></html>